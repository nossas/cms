{% extends 'tailwind.html'%}
{% load static page_extras %}

{% block page_head %}
<script src="https://code.jquery.com/jquery-3.7.0.min.js"
  integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
{% endblock %}

{% block favicon %}
<link rel="shortcut icon" href="{% static 'images/eleicao/favicon.png' %}" type="image/x-icon">
{% endblock %}

{% block title %}A EleiÃ§Ã£o do Ano: {{object.short_name}}{% endblock %}

{% block body_class %}aeleicaodoano{% endblock %}

{% block content %}
{% include 'eleicao/plugins/navbar.html' %}
<main class="bg-white candidate-detail">
  <!-- Modal -->
  <!-- Open the modal using ID.showModal() method -->
  <dialog id="my_modal_2" class="w-full px-0 modal{% if modal_is_open %} modal-open{% endif %}">
    <form method="dialog" class="m-auto w-full modal-box md:w-auto">
      <div class="flex flex-col mt-6 text-center text-blue-800">
        <button class="absolute top-2 right-2 btn btn-sm btn-circle btn-ghost">âœ•</button>
        <h3 class="mb-4 :text-3xl md:text-5xl">Perfil cadastrado ðŸŽ‰</h3>
        <p class="mb-2 text-xl font-bold">{{ request.scheme }}://{{ request.META.HTTP_HOST }}{{ request.path }}</p>
        <p class="mb-2 text-lg">Agora Ã© sÃ³ divulgar nas redes</p>
      </div>
      {% include 'eleicao/includes/candidate_share.html' with object=object %}
    </form>
    <form method="dialog" class="modal-backdrop">
      <button>close</button>
    </form>
  </dialog>

  <!-- Detail 1: Perfil do candidato -->
  <section class="m-auto w-full max-w-screen-xl md:py-12 candidate-detail-infos md:px-14">
    <div class="grid grid-cols-1 gap-8 {% if object.photo %}md:grid-cols-3{% endif %}profile">
      {% if object.photo %}
      <div class="col-span-1 photo">
          <img src="{{ object.photo.url }}" alt="Foto do(a) candidato(a)" class="mx-auto max-w-xs h-auto rounded-sm md:mx-0">
      </div>
      {% endif %}
      <div class="{% if object.photo %}md:col-span-2 mx-0{% endif %}election-info md:mx-auto">
        <div class="grid md:justify-center md:grid-cols-2">
          <div class="px-5 text-blue-800 text md:px-0">
            <h3 class="mt-3 mb-1 text-xl md:text-2xl md:mt-0">{{object.place.city}} - {{object.place.state}}</h3>
            <h1 class="mb-1 text-5xl md:text-7xl">{{object.name}}</h1>
            <h2 class="mb-1 text-2xl md:text-5xl" aria-label="NÃºmero do(a) candidato(a)">{{object.number}}</h2>
          </div>
          <div class="flex gap-4 justify-end my-4 mr-64">
            {% for social_media_item in object.social_media %}
            <a href="{{ social_media_item.url }}">
              {% if social_media_item.kind == 'twitter' %}
              <svg width="30" height="24" viewBox="0 0 30 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M30 2.83958C28.8958 3.32144 27.7111 3.64824 26.4663 3.79413C27.7373 3.04452 28.7102 1.85552 29.1714 0.443097C27.9791 1.13729 26.6631 1.64136 25.2608 1.91462C24.1379 0.734842 22.5407 0 20.7692 0C17.3704 0 14.6147 2.71405 14.6147 6.05954C14.6147 6.53402 14.669 6.99744 14.774 7.44058C9.66002 7.18761 5.12525 4.77452 2.0902 1.10774C1.55966 2.00137 1.25785 3.04264 1.25785 4.15414C1.25785 6.25709 2.34515 8.11262 3.99486 9.1982C2.98628 9.16498 2.0377 8.89173 1.20726 8.43753V8.51323C1.20726 11.4488 3.32937 13.8989 6.1432 14.4565C5.62766 14.5931 5.08403 14.6688 4.52163 14.6688C4.12422 14.6688 3.73991 14.63 3.36309 14.5562C4.14667 16.9656 6.41878 18.7177 9.1108 18.7657C7.00555 20.3905 4.35104 21.3561 1.46785 21.3561C0.97108 21.3561 0.481765 21.3265 0 21.273C2.72388 22.9956 5.95766 24 9.43325 24C20.7542 24 26.9425 14.7648 26.9425 6.75561L26.9219 5.97095C28.131 5.12159 29.177 4.05445 30 2.83958Z"
                  fill="#3C9CD8" />
              </svg>
              {% elif social_media_item.kind == 'facebook' %}
              <svg width="13" height="24" viewBox="0 0 13 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M0.415129 12.7824H3.23609V23.6129C3.23609 23.8267 3.42187 24 3.65117 24H8.43423C8.66353 24 8.84931 23.8267 8.84931 23.6129V12.8334H12.0923C12.3031 12.8334 12.4806 12.6859 12.5047 12.4905L12.9972 8.50331C13.0107 8.39363 12.9735 8.28375 12.8947 8.20144C12.816 8.11908 12.7032 8.07192 12.5849 8.07192H8.84951V5.5725C8.84951 4.81908 9.28449 4.437 10.1426 4.437C10.2649 4.437 12.5849 4.437 12.5849 4.437C12.8142 4.437 13 4.26366 13 4.04991V0.389953C13 0.176109 12.8142 0.00285937 12.5849 0.00285937H9.219C9.19528 0.00178125 9.14255 0 9.06484 0C8.48083 0 6.45082 0.106922 4.84725 1.48266C3.07052 3.00722 3.31752 4.83258 3.37653 5.14908V8.07183H0.415079C0.185776 8.07183 0 8.24508 0 8.45892V12.3953C5.02639e-05 12.609 0.185825 12.7824 0.415129 12.7824Z"
                  fill="#395AA1" />
              </svg>
              {% elif social_media_item.kind == 'instagram' %}
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19.2 0H4.8C3.5274 0.00142927 2.30733 0.507601 1.40747 1.40747C0.507601 2.30733 0.00142927 3.5274 0 4.8V19.2C0.00142927 20.4726 0.507601 21.6927 1.40747 22.5925C2.30733 23.4924 3.5274 23.9986 4.8 24H19.2C20.4726 23.9987 21.6928 23.4925 22.5926 22.5926C23.4925 21.6928 23.9987 20.4726 24 19.2V4.8C23.9987 3.52737 23.4925 2.30725 22.5926 1.40736C21.6928 0.507475 20.4726 0.00133416 19.2 0ZM21.6 19.2C21.5993 19.8363 21.3462 20.4463 20.8963 20.8963C20.4463 21.3462 19.8363 21.5993 19.2 21.6H4.8C4.16368 21.5994 3.5536 21.3463 3.10365 20.8964C2.6537 20.4464 2.40064 19.8363 2.4 19.2V4.8C2.40064 4.16368 2.6537 3.5536 3.10365 3.10365C3.5536 2.6537 4.16368 2.40064 4.8 2.4H19.2C19.8363 2.40073 20.4463 2.65382 20.8963 3.10375C21.3462 3.55368 21.5993 4.1637 21.6 4.8V19.2Z" fill="#FF4658"/>
                <path d="M20.4 5.4C20.4 6.39411 19.5941 7.2 18.6 7.2C17.6059 7.2 16.8 6.39411 16.8 5.4C16.8 4.40589 17.6059 3.6 18.6 3.6C19.5941 3.6 20.4 4.40589 20.4 5.4Z" fill="#FF4658"/>
                <path fill-rule="evenodd" clip-rule="evenodd" d="M12 15.6C13.9882 15.6 15.6 13.9882 15.6 12C15.6 10.0118 13.9882 8.4 12 8.4C10.0118 8.4 8.4 10.0118 8.4 12C8.4 13.9882 10.0118 15.6 12 15.6ZM12 18C15.3137 18 18 15.3137 18 12C18 8.68629 15.3137 6 12 6C8.68629 6 6 8.68629 6 12C6 15.3137 8.68629 18 12 18Z" fill="#FF4658"/>
                </svg>
              {% elif social_media_item.kind == 'site' %}
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M21.1153 1.34429L21.1152 1.34403C19.8655 0.344591 18.2748 -0.127122 16.6822 0.029467C15.0897 0.186056 13.6213 0.958557 12.5901 2.18227L10.7957 4.32991C10.5354 4.64147 10.4095 5.04369 10.4458 5.44806C10.482 5.85244 10.6774 6.22586 10.989 6.48618C11.3005 6.74649 11.7028 6.87237 12.1071 6.83613C12.5115 6.79989 12.8849 6.6045 13.1452 6.29294L14.9397 4.14503C15.2018 3.83234 15.5239 3.57535 15.8869 3.38926C16.25 3.20317 16.6467 3.09175 17.0536 3.06158C17.4604 3.03141 17.8692 3.08311 18.2558 3.21362C18.6423 3.34413 18.9988 3.5508 19.3041 3.82142C19.892 4.3677 20.2465 5.11961 20.294 5.92068C20.3415 6.72176 20.0782 7.51029 19.559 8.12218L15.8283 12.5889L15.7939 12.6269C15.5947 12.858 15.3611 13.0573 15.1015 13.2177C14.5014 13.59 13.7906 13.7424 13.0905 13.6488C12.3905 13.5552 11.7447 13.2215 11.2634 12.7046C10.9864 12.4084 10.6033 12.2342 10.198 12.2202C9.79277 12.2062 9.39851 12.3536 9.10178 12.63C8.80505 12.9063 8.63008 13.2891 8.61528 13.6944C8.60048 14.0996 8.74705 14.4941 9.02282 14.7914C9.71512 15.5343 10.5815 16.093 11.5438 16.4172C12.5061 16.7415 13.5339 16.8209 14.5346 16.6485C14.8476 16.5935 15.1559 16.5147 15.4569 16.4128C16.5202 16.0541 17.4634 15.4079 18.1819 14.546L21.9034 10.0918C22.4327 9.45322 22.8304 8.71629 23.0738 7.92339C23.3172 7.1305 23.4014 6.2973 23.3216 5.47175C23.2486 4.67117 23.0157 3.89338 22.6367 3.18441C22.2578 2.47545 21.7404 1.84973 21.1153 1.34429Z" fill="#EDB052"/>
              <path d="M10.0989 17.8838L8.49521 19.8032C7.98532 20.4229 7.2561 20.8221 6.4593 20.9178C5.66251 21.0134 4.85952 20.7981 4.21746 20.3167C3.89685 20.0644 3.63009 19.7504 3.43293 19.3932C3.23576 19.036 3.11221 18.6429 3.06957 18.2372C3.02693 17.8315 3.06607 17.4213 3.18466 17.0309C3.30326 16.6406 3.49892 16.2779 3.76007 15.9645L7.55506 11.4221L7.58299 11.3909C7.78228 11.1598 8.01582 10.9606 8.27548 10.8003C8.8196 10.461 9.45706 10.3023 10.0968 10.347C10.7365 10.3917 11.3457 10.6375 11.8373 11.0492C11.9551 11.1475 12.0653 11.2545 12.1671 11.3692C12.3129 11.5342 12.4926 11.6657 12.6939 11.7548C12.8952 11.8439 13.1133 11.8885 13.3334 11.8855C13.5509 11.8824 13.7652 11.8324 13.9616 11.7389C14.158 11.6454 14.3319 11.5106 14.4714 11.3438L14.4897 11.3217C14.7239 11.0442 14.8502 10.6917 14.8455 10.3286C14.8408 9.96553 14.7053 9.61634 14.464 9.34503C13.8813 8.6852 13.1629 8.15905 12.358 7.80261C11.5531 7.44618 10.6807 7.26786 9.80047 7.27987C8.92025 7.29187 8.05301 7.49393 7.25813 7.87219C6.46324 8.25045 5.75946 8.796 5.19498 9.47149L1.41057 14.0015C0.389835 15.2339 -0.109132 16.8163 0.0200393 18.4113C0.14921 20.0063 0.896301 21.4878 2.10205 22.54C2.7106 23.0652 3.41836 23.463 4.18341 23.7098C4.94846 23.9566 5.75526 24.0474 6.55603 23.9768C6.74691 23.9614 6.93632 23.9371 7.12427 23.904C8.5795 23.6491 9.89853 22.8901 10.85 21.7599L12.4484 19.8468C12.7087 19.5352 12.8346 19.133 12.7983 18.7286C12.7621 18.3243 12.5667 17.9508 12.2551 17.6905C11.9436 17.4302 11.5413 17.3043 11.137 17.3406C10.7326 17.3768 10.3592 17.5722 10.0989 17.8838Z" fill="#EDB052"/>
              </svg>
              {% endif %}
            </a>
            {% endfor %}
          </div>
        </div>

        <div class="grid grid-cols-2 px-5 my-1 mt-2 text-blue-800 capitalize candidate-info md:px-0">
          <div class="flex flex-col gap-1">
            <div class="flex flex-col gap-2 md:flex-row">
              <label class="font-bold">ReeleiÃ§Ã£o:</label>
              <p>{%if object.is_reelection is True %}Sim{%else %}NÃ£o{%endif%}</p>
            </div>
            <div class="flex flex-col gap-2 md:flex-row">
              <label class="font-bold">ProfissÃ£o:</label>
              <p>{{object.occupation}}</p>
            </div>
            <div class="flex flex-col gap-2 md:flex-row">
              <label class="font-bold">Idade:</label>
              <p>{{object.age}}</p>
            </div>
          </div>
          <div class="flex flex-col gap-1">
            {% comment %} TODO: validaÃ§Ã£o gÃªnero {% endcomment %}
            <div class="flex flex-col gap-2 md:flex-row">
              <label class="font-bold">GÃªnero:</label>
              <p>{{object.gender}} {% if object.is_trans is True %}TransgÃªnero{%else %}CisgÃªnero{%endif%}</p>
            </div>
            <div class="flex flex-col gap-2 md:flex-row">
              <label class="font-bold">RaÃ§a:</label>
              <p>{{object.race}}</p>
            </div>
          </div>
        </div>
        <div class="px-5 py-5 mt-2 minibio md:px-0 md:py-0">
          <p class="text-blue-800">
            {{object.bio}}
          </p>
        </div>
      </div>
  </section>

  {% if object.video %}
  <section class="py-16 bg-[#EDB052] candidate-detail-video text-blue-800 px-12 md:px-0">
    <h1 class="flex justify-center mb-4 text-3xl text-center uppercase md:text-4xl">O que {{ object.short_name }} tem pra dizer</h1>
    <div class="flex justify-center items-center">
      <video controls width="640" height="360" alt="VÃ­deo do candidato">
        <source src="{{ object.video.url }}" type="video/mp4">
        Seu navegador nÃ£o suporta o elemento de vÃ­deo.
      </video>
    </div>
  </section>
  {% endif %}

  <section class="px-5 py-16 candidate-detail-share">
    <h1 class="m-auto mb-4 max-w-xs text-3xl text-center text-blue-800 md:text-4xl">Compartilhe nas redes para apoiar {{ object.short_name }}</h1>
    {% include 'eleicao/includes/candidate_share.html' with object=object %}
    
  </section>
  <p class="text-blue-800 text-center">Viu algo estranho? <a href="mailto:aeleicaodoano@nossas.org">Clique aqui para denunciar esse perfil.</a></p>
</main>
{% include 'eleicao/plugins/footer.html' %}
{% render_bonde_footer %}
{% endblock %}

{% block footer_js %}
<script>
  (function ($) {
    "use strict";

    $(function () {
      const $dialog = $("dialog.modal");
      
      $("dialog.modal .modal-box button").click(() => {
        $dialog.removeClass('modal-open');
      });

      $("dialog.modal .modal-backdrop").click(() => {
        $dialog.removeClass('modal-open');
      });
    });
  }(window.jQuery));
</script>
{% endblock %}