{% load static %}

{% block page_head %}
  <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
{% endblock %}

<section class="bg-[#024C2B]">
  <div class="container relative gap-8 px-5 py-28 mx-auto md:px-auto">
    <div class="mb-6 text-center text-neutral-200">
      <h2 class="mb-4 text-4xl">{{title}}</h2>
      <p class="text-lg">{{description}}</p>
    </div>
    <div class="overflow-hidden">
      <div class="carousel">
        <div class="carousel-track">
          <div class="carousel-slide">
            {% comment %} Conteúdo do Slide {% endcomment %}
            <div class="grid grid-cols-2 gap-6 md:grid-cols-4">
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-children.svg' with width=110 %}
                <p class="text-neutral-100">Atuação em parceria permanente com serviços de proteção dos direitos da criança e do adolescente.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-participate.svg' with width=110 %}
                <p class="text-neutral-100">Participação popular na construção de políticas públicas para crianças e adolescentes.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-religious-freedom.svg' with width=110 %}
                <p class="text-neutral-100">Respeito à liberdade religiosa, ao Estado laico e às diferentes religiosidades, com enfrentamento ativo ao racismo religioso.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-lgbt.svg' with width=110 %}
                <p class="text-neutral-100">Respeito aos direitos da população LGBT+, como o nome social de pessoas trans e a constituição de famílias homoparentais.</p>
              </div>
            </div>
          </div>
          <div class="carousel-slide">
            {% comment %} Conteúdo do Slide {% endcomment %}
            <div class="grid grid-cols-2 gap-6 md:grid-cols-4">
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-network.svg' with width=110 %}
                <p class="text-neutral-100">Prioridade ao acionamento da rede de proteção, com encaminhamento a medidas socioeducativas como último recurso.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-family.svg' with width=110 %}
                <p class="text-neutral-100">Prioridade à manutenção dos vínculos familiares, com medida de abrigamento como último recurso (e sempre decidida com aval do Ministério Público).</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-ears.svg' with width=110 %}
                <p class="text-neutral-100">Garantia de escuta especializada e depoimento especial para crianças e adolescentes em situação de violência.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-sexual-rights.svg' with width=110 %}
                <p class="text-neutral-100">Respeito aos direitos sexuais e reprodutivos e garantia de acesso ao aborto legal para crianças e adolescentes vítimas de violência sexual.</p>
              </div>
            </div>
          </div>
          <div class="carousel-slide">
            {% comment %} Conteúdo do Slide {% endcomment %}
            <div class="grid grid-cols-2 gap-6 md:grid-cols-4">
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-indigenous.svg' with width=110 %}
                <p class="text-neutral-100">Efetivação dos direitos de populações indígenas e povos e comunidades tradicionais.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-plan.svg' with width=110 %}
                <p class="text-neutral-100">Planejamento de acordo com o Plano Decenal de Direitos Humanos de Crianças e Adolescentes.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-orcamento.svg' with width=110 %}
                <p class="text-neutral-100">Colaboração com o Poder Executivo local na elaboração do orçamento para crianças e adolescentes.</p>
              </div>
              <div class="flex flex-col gap-4 items-center text-center">
                {% include 'eleicao/icons/icon-sipia.svg' with width=110 %}
                <p class="text-neutral-100">Registro permanente de informações no SIPIA - Sistema de Informação para Infância e Adolescência.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="flex absolute left-0 top-1/2 justify-between w-full">
      <button class="carousel-button" data-dir="-1">
        <svg width="10" height="15" viewBox="0 0 10 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id="icon-back">
            <path id="Combined Shape" fill-rule="evenodd" clip-rule="evenodd" d="M2.88605 7.5L8.15481 12.5144L8.5 12.843L7.80962 13.5L7.46444 13.1715L2.19568 8.15704L2.19038 8.16209L1.5 7.50505L1.5053 7.5L1.5 7.49495L2.19038 6.83791L2.19568 6.84296L7.46444 1.82852L7.80962 1.5L8.5 2.15704L8.15481 2.48558L2.88605 7.5Z" stroke="white" stroke-linecap="square"/>
          </g>
        </svg>
      </button>
      <button class="carousel-button" data-dir="1">
        <svg width="10" height="15" viewBox="0 0 10 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g id="icon-back">
            <path id="Combined Shape" fill-rule="evenodd" clip-rule="evenodd" d="M7.11395 7.5L1.84519 2.48558L1.5 2.15704L2.19038 1.5L2.53556 1.82852L7.80432 6.84296L7.80962 6.83791L8.5 7.49495L8.4947 7.5L8.5 7.50505L7.80962 8.16209L7.80432 8.15704L2.53556 13.1715L2.19038 13.5L1.5 12.843L1.84519 12.5144L7.11395 7.5Z" stroke="white" stroke-linecap="square"/>
          </g>
        </svg>
      </button>
    </div>
    <div class="flex justify-center mt-6 carousel-controls">
      {% comment %} O primeiro slide sempre está com active, pensar nisso na hora de fazer o loop pro refactor do Plugin e o data-slide sempre tem o número da index (até por questões de a11y){% endcomment %}
      <button class="mx-1 w-3 h-3 bg-[#91CEC1] rounded-full carousel-dot hover:bg-gray-400 active" data-slide="0"></button>
      <button class="mx-1 w-3 h-3 bg-[#91CEC1] rounded-full carousel-dot hover:bg-gray-400" data-slide="1"></button>
      <button class="mx-1 w-3 h-3 bg-[#91CEC1] rounded-full carousel-dot hover:bg-gray-400" data-slide="2"></button>
    </div>
  </div>
</section>

<script>
  (function ($) {
    "use strict";

    const track = $('.carousel-track');
    const dots = $('.carousel-dot');
    const slides = $('.carousel-slide');
    const prevButton = $('.carousel-button[data-dir="-1"]');
    const nextButton = $('.carousel-button[data-dir="1"]');
    let currentSlide = 0;

    prevButton.click(function () {
      currentSlide = (currentSlide - 1 + slides.length) % slides.length;
      updateCarousel();
    });

    nextButton.click(function () {
      currentSlide = (currentSlide + 1) % slides.length;
      updateCarousel();
    });

    dots.click(function () {
      currentSlide = parseInt($(this).attr('data-slide'));
      updateCarousel();
    });

    function updateCarousel() {
      const position = -currentSlide * track.width();
      // Fazer o position alterar também a partir do redimensionamento da página seria o mais apropriado?
      track.css('transform', `translateX(${position}px)`);

      dots.removeClass('active');
      dots.eq(currentSlide).addClass('active');
    }

  }(window.jQuery));
</script>
